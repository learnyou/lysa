\s{Partial functions}

If you remember way back to the beginning of the chapter, I constructed a
function that looked like this:

\begin{equation}
    \eva{f}{x} = x + 3
\end{equation}

I pointed out that, because there is no natural number $x$, such that
$\eva{f}{x} < 3$, that $f$'s output type would therefore be the set of numbers
greater than or equal to 3. That is

\begin{equation}
    f : \N \to \scomp{x : \N}{x \ge 3}
\end{equation}

In this case, we made $f$ into a \term{surjective} function, merely by making
its output type more specific.

Before I get any further, let me give you some definitions. You don't have to
remember all of these right away, you'll pick them up as we go along.

\begin{definition}[Domain]
    The domain of a function $f$ is the input type of $f$. That is, if

    \begin{equation}
        f : A \to B
    \end{equation}

    then the domain of $f$, written $\dom{f}$, is $A$. That is:

    \begin{equation}
        \dom{f} = A
    \end{equation}
\end{definition}

\begin{definition}[Total function]
    If a function $f$ is able to operate on every value in its domain, $f$ is a
    \xti{total function}.

    The function above, $\fn{x}{x + 3}$ is a total function. For \xti{any} $x$
    in the domain $\N$, $f$ can add $3$ to it, and give you a result.
\end{definition}

\begin{definition}[Partial function]
    If a function $f$ is \xtb{not} able to operate on every value in its domain,
    $f$ is a \xti{partial function}.

    The standard example is what's called the \term{reciprocal function}:

    \begin{equation}
        \eva{r}{x} = \frac{1}{x}
    \end{equation}

    Note that $r$ does \xtb{not} have the type $\N \to \N$. In this case, $r$
    instead has the type $\Z \to \Q$, where

    \begin{itemize}
      \item $\Z$ is the set of integers: $\mset{\dots,-2,-1,0,1,2,\dots}$, and
      \item $\Q$ is the set of all numbers that can be expressed as a fraction
        of two integers.
    \end{itemize}

    For every value in $\Z$, \xti{except} $0$, you can run $r$ on it and get a
    result in $\Q$. Remember, you can't divide by $0$.

    But, because $r$ can't operate on every value in its domain, $r$ is a
    partial function.

    Partial functions are not very fun. They don't provide much in the way of
    interesting insights, or have any deeper meaning. The only purpose they
    serve is to be a pain in the ass. For that reason, mathematicians do
    everything they can to avoid them.

    \xtb{Remember:} partial functions are evil!
\end{definition}

\begin{definition}[Codomain]
    Mathematicians have a fancy term for the input type to a function. It
    therefore stands to reason that mathematicians would have an even fancier
    and more pretentious term for the output type: \term{codomain}.

    In general, in math, if you know what \term{something} is, the
    \term{cosomething} is just the dual of \term{something}. In this case, the
    \term{domain} is the input type of the function, and the \term{codomain} is
    the output type of the function.

    If $f : A \to B$, then 

    \begin{equation}
        \codom{f} = B
    \end{equation}

    \xtb{What if $f$ has a curried type, so instead of $A \to B$, it's
      $A \to B \to C \to D \to \dots$?}

    Good question! Remember that curried types are right-associative, so

    \begin{equation}
        A \to B \to C \to D \to \dots
    \end{equation}

    is really just the lazy man's way of writing

    \begin{equation}
        A \to \parens{B \to \parens{C \to \parens{D \to \dots}}}
    \end{equation}

    Therefore, if 

    \begin{equation}
        f : A \to \parens{B \to \parens{C \to \parens{D \to \dots}}}
    \end{equation}

    then

    \begin{equation}
        \codom{f} = B \to \parens{C \to \parens{D \to \dots}}
    \end{equation}
\end{definition}

\begin{asidebox}
    \xtb{Same function, different [co]domain}

    This touches upon a cool thing. Let's say we have some function:

    \begin{equation}
        f : A \to B \to C \to D
    \end{equation}

    The type of $f$ is written in curried form. Thus,

    \begin{rclmath}
        \dom{f} & = & A \\
        \codom{f} & = & B \to C \to D \\
    \end{rclmath}

    If we write $f$'s type in uncurried form:

    \begin{equation}
        f : \parens{A,B,C} \to D
    \end{equation}

    Then

    \begin{rclmath}
        \dom{f} & = & \parens{A,B,C} \\
        \codom{f} & = & D \\
    \end{rclmath}

    So, we have two identical functions with a different domain and codomain. That's
    pretty cool.

    Okay, I guess it's not \xti{all} that cool. I realized it while I was writing
    this out though, so I thought it was worth mentioning.
\end{asidebox}

\begin{definition}[Range]
    Remember when we were talking about domains and total functions? It was just
    the last page. Essentially:

    \begin{itemize}
      \item The \term{domain} is the possible inputs to the function.
      \item A \term{total function} is a function able to operate on all its
        potential inputs.
      \item The \term{codomain} is the possible outputs of the function.
      \item The \xtb{\term{range}} is the actual set of outputs of the function.
    \end{itemize}
\end{definition}

\begin{definition}[Surjection]
    If a functions range is the same as its codomain, then the function is
    \term{surjective}.

    That is, if there's a function $f : A \to B$, then $f$ is surjective if
    there aren't any values of $B$ that can't be ``reached'' by $f$.
\end{definition}

\begin{example}
    Let's say we have some function $f$.

    \begin{description}
      \item[$f$'s domain] The natural numbers less than $10$. That is,

        \begin{equation}
            \dom{f} = \scomp{x : \N}{x < 10}
        \end{equation}

      \item[$f$'s codomain] The natural numbers whose value is at least 5 but
        less than 15. That is,

        \begin{equation}
            \codom{f} = \scomp{x : \N}{5 \leq x < 15}
        \end{equation}
    \end{description}

    Question: how do you write $f$'s signature?

    Answer: like this:

    \begin{equation}
        f : \scomp{x : \N}{x < 10} \to \scomp{x : \N}{5 \leq x < 15}
    \end{equation}

    Okay, let's find a function that fits that signature! Can you make an
    educated guess? I'll let you guess, and put in a page break.

    \newpage

    Here's my answer:

    \begin{equation}
        \eva{f}{x} = x + 5
    \end{equation}

    Let's make a little table, shall we?

    \begin{tabu}{c|c}
      Input value & Output value \\
      \hline \\
      0 & 5 \\
      1 & 6 \\
      2 & 7 \\
      3 & 8 \\
      \dots & \dots \\
      9 & 14 \\
    \end{tabu}

    It just adds 5 to all the input values.

    Let's ask ourselves some questions:

    \begin{enumerate}
      \item Is $f$ total?
      \item Is $f$ surjective?
    \end{enumerate}

    What do those terms mean again?

    \begin{description}
      \item[Total] means that $f$ has an answer for every value in its
        domain. $f$ does, so yay!
      \item[Surjective] means that $f$ reaches every value in its codomain. $f$
        does!
    \end{description}

    Yay, this isn't hard! It's not very interesting yet, but nonetheless it
    isn't hard!
\end{example}

That last function had another property which proves to be important:
injection. That is, for some value in the range, there is exactly one value
in the domain that reaches it.

For instance, $6$ can only be reached by $\eva{f}{1}$. There isn't another value
$x$ such that $\eva{f}{x} = 6$. The \xti{only} value for which that holds is
$1$.

The same property holds for the rest of the range: for every value $y$ in the
range, there is exactly one value $x$ such that $\eva{f}{x} = y$

\begin{definition}[Injection]
    If $f$'s domain is in one-to-one correspondence with
    its range, then $f$ is an injection.

    More formally,

    \begin{textmath}
        Let $f : A \to B$, and $C$ be the range of $f$ (i.e. the subset of the
        codomain reachable by $f$).

        If, for all $y : C$, there is exactly one value $x : A$ such that
        $\eva{f}{x} = y$, then $f$ is an \term{injection}.
    \end{textmath}
\end{definition}

\begin{definition}[Bijection]
    If $f$ is both an injection and a surjection, then $f$ is a
    \term{bijection}.

    More formally,

    \begin{textmath}
        Let $f : A \to B$.

        If, for all $y : B$, there is exactly one value $x : A$ such that
        $\eva{f}{x} = y$, then $f$ is a \term{bijection}.
    \end{textmath}
\end{definition}

\begin{example}
    Let's come up with a total function that is surjective but not injective.

    This is a bit of a challenge! Basically, a function has to go over the same
    value twice in order to not be injective, but it has to go over every value
    in the codomain!

    Here's my version:

    \begin{alignedmath}
        f : \N \to \scomp{x : \N}{x < 10} \\
        \eva{f}{x} = x \mod{10} \\
    \end{alignedmath}

    Okay, what the hell is mod?

    ``mod'' is short for ``modulo''. $x \mod y$ is the remainder of
    non-fractionally dividing $x$ by $y$. For instance, $\frac{12}{10}$ is $1$
    with a remainder of $2$. So $12 \mod{10} = 2$.

    You should notice that $14 \mod{10}$ is $4$, but so is $4 \mod{10}$. And for
    that matter, so is $114 \mod{10}$. There are multiple values that can reach
    $4$ via $f$, so $f$ is \xtb{not} injective.

    However, every value in $f$'s codomain is reached by $f$, and therefore $f$
    is surjective!

    A much easier function would be something like this:\footnote{The pipe in
      the middle just means ``such that'', just as it does in the comprehension
      notation.}

    \begin{alignedmath}
        f : \N \to \N \\
        \eva{f}{0} = 44 \\
        \eva{f}{x} \mid x > 0 = x + 4 \\
    \end{alignedmath}

    However, I thought of the modulo example first, and it seems a bit more
    likely to happen in the real world.
\end{example}

\begin{ExcList}
    \Exercise{Come up with a partial function.}
    \Answer{Many many correct answers here. The one I thought of is:

      \begin{alignedmath}
          f : \N \to \Q \\
          \eva{f}{x} = \frac{2}{x} \\
      \end{alignedmath}
    }

    \Exercise{Come up with a total function that is injective but not
      surjective.}

    \Answer{Again, there are a lot of correct answers here, but the one I came
      up with is:

      \begin{alignedmath}
          f : \N \to \N \\
          \eva{f}{x} = 2x \\
      \end{alignedmath}

      Remember, $xy$ is shorthand for multiplying $x$ and $y$.
    }

    \Exercise{Come up with a total bijective function.}
    \Answer{Here's mine:

      \begin{alignedmath}
          \eva{f}{x} = x
      \end{alignedmath}

      It's so simple, it should be cheating. But it's not.

      \begin{quotation}
          When the book author does it that means that it is not cheating.

          --- Richard M. Nixon
      \end{quotation} 
    }
\end{ExcList}